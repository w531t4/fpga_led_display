{
    "name": "fpga_led_display Dev",
    "build": {
        "context": "..",
        "dockerfile": "../Dockerfile.dev",
        "args": {
            "VERIBLE_VERSION": "v0.0-4040-g0a93553b"
        }
    },
    "onCreateCommand": "npm ci --prefix depends/netlistsvg",
    "postCreateCommand": "git config --global --add safe.directory ${containerWorkspaceFolder} && .devcontainer/setup",
    "postStartCommand": ".devcontainer/bootstrap",
    "containerEnv": {
        "PYTHONASYNCIODEBUG": "1"
    },
    "initializeCommand": "mkdir -p ${HOME}/.cache/oss-cad-suite",
    "mounts": [
        // This is used to cache oss-cad-suite on main system
        "source=${localEnv:HOME}/.cache/oss-cad-suite,target=/workspaces/.cache/oss-cad-suite,type=bind"
    ],
    "features": {
        "ghcr.io/devcontainers/features/node:1": {},
        "ghcr.io/devcontainers/features/github-cli:1": {}
    },
    // "appPort": [],
    "runArgs": [
        "-e",
        "GIT_EDITOR=code --wait",
        "--security-opt",
        "label=disable",
        // To allow programming the fpga
        "--device=/dev/bus/usb:/dev/bus/usb",
        "--group-add=dialout",
        "--group-add=plugdev"
    ],
    "customizations": {
        "vscode": {
            "extensions": [
                "charliermarsh.ruff",
                "ms-python.pylint",
                "ms-python.vscode-pylance",
                "redhat.vscode-yaml",
                "esbenp.prettier-vscode",
                "GitHub.vscode-pull-request-github",
                "mshr-h.veriloghdl"
            ],
            "settings": {
                "remote.autoForwardPorts": false,
                "git.ignoredRepositories": [
                    "/workspaces/fpga_led_display/depends/yosys_ecp5_infer_bram_outreg"
                ],
                "python.experiments.optOutFrom": ["pythonTestAdapter"],
                "python.defaultInterpreterPath": "/home/vscode/.local/venv/bin/python",
                "python.pythonPath": "/home/vscode/.local/venv/bin/python",
                "python.terminal.activateEnvInCurrentTerminal": true,
                "python.testing.pytestArgs": ["--no-cov"],
                "pylint.importStrategy": "fromEnvironment",
                "python.analysis.typeCheckingMode": "basic",
                "editor.formatOnPaste": false,
                "editor.formatOnSave": true,
                "editor.formatOnType": true,
                "files.trimTrailingWhitespace": true,
                "terminal.integrated.profiles.linux": {
                    "bash": {
                        "path": "/usr/bin/bash"
                    }
                },
                "terminal.integrated.defaultProfile.linux": "bash",
                "[python]": {
                    "editor.defaultFormatter": "charliermarsh.ruff"
                },
                "[json][jsonc][yaml]": {
                    "editor.defaultFormatter": "esbenp.prettier-vscode"
                },
                "json.schemas": [],
                "prettier.tabWidth": 4,
                "verilog.formatting.veribleVerilogFormatter.arguments": "--indentation_spaces=4 --column_limit=120"
            }
        }
    }
}
