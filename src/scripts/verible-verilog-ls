#!/usr/bin/env python3
# SPDX-FileCopyrightText: 2025 Aaron White <w531t4@gmail.com>
# SPDX-License-Identifier: MIT
import os
import sys
from pathlib import Path


def find_app() -> str:
    override = os.environ.get("VERIBLE_LS_BIN")
    if override:
        return override
    candidate = Path("/usr/local/bin/verible-verilog-ls")
    if candidate.is_file() and os.access(candidate, os.X_OK):
        return str(candidate)
    return "verible-verilog-ls"


def main() -> None:
    ls = find_app()
    if len(sys.argv) < 2:
        os.execvp(ls, [])
    args = sys.argv[1:]
    os.execvp(ls, [ls] + args)


if __name__ == "__main__":
    main()
